<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
    <meta name="description" content="" />
    <meta name="author" content="" />
    <title>Checkout - Business Casual</title>
    <link rel="icon" type="image/x-icon" href="assets/favicon.ico" />
    <!-- Google fonts-->
    <link href="https://fonts.googleapis.com/css?family=Raleway:100,100i,200,200i,300,300i,400,400i,500,500i,600,600i,700,700i,800,800i,900,900i" rel="stylesheet" />
    <link href="https://fonts.googleapis.com/css?family=Lora:400,400i,700,700i" rel="stylesheet" />
    <!-- Core theme CSS (includes Bootstrap)-->
    <link href="css/styles.css" rel="stylesheet" />
    <style>
        .cart-img {width: 48px; height: 48px; object-fit: cover; border-radius: 6px;}
        .checkout-section .bg-faded {background: #fffbe9;}
        .form-label {font-weight: 600;}
    </style>
</head>
<body>
    <header>
        <h1 class="site-heading text-center text-faded d-none d-lg-block">
            <span class="site-heading-upper text-primary mb-3">A Free Bootstrap Business Theme</span>
            <span class="site-heading-lower">Business Casual</span>
        </h1>
    </header>
    <!-- Navigation-->
    <nav class="navbar navbar-expand-lg navbar-dark py-lg-4" id="mainNav">
        <div class="container">
            <a class="navbar-brand text-uppercase fw-bold d-lg-none" href="index.html">Start Bootstrap</a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation"><span class="navbar-toggler-icon"></span></button>
            <div class="collapse navbar-collapse" id="navbarSupportedContent">
                <ul class="navbar-nav mx-auto">
                    <li class="nav-item px-lg-4"><a class="nav-link text-uppercase" href="index.html">Home</a></li>
                    <li class="nav-item px-lg-4"><a class="nav-link text-uppercase" href="about.html">About</a></li>
                    <li class="nav-item px-lg-4"><a class="nav-link text-uppercase" href="products.html">Products</a></li>
                    <li class="nav-item px-lg-4"><a class="nav-link text-uppercase" href="cart.html">Store</a></li>
                </ul>
            </div>
        </div>
    </nav>
    <!-- Checkout Section -->
    <section class="page-section about-heading checkout-section">
        <div class="container">
            <div class="about-heading-content">
                <div class="row justify-content-center">
                    <div class="col-xl-10 col-lg-12 mx-auto">
                        <div class="bg-faded rounded p-5 mt-5">
                            <h2 class="section-heading mb-4 text-center">
                                <span class="section-heading-upper">Review & Place Order</span>
                                <span class="section-heading-lower">Checkout</span>
                            </h2>
                            <div class="row">
                                <!-- Form điền thông tin -->
                                <div class="col-lg-6 mb-4 mb-lg-0">
                                    <form id="checkout-form" autocomplete="off">
                                        <div class="mb-3">
                                            <label for="name" class="form-label">Name <span class="text-danger">*</span></label>
                                            <input type="text" class="form-control" id="name" name="name" required autocomplete="name">
                                        </div>
                                        <div class="mb-3">
                                            <label for="phone" class="form-label">Phone <span class="text-danger">*</span></label>
                                            <input type="tel" class="form-control" id="phone" name="phone" required autocomplete="tel">
                                        </div>
                                        <div class="mb-3">
                                            <label for="email" class="form-label">Email <span class="text-danger">*</span></label>
                                            <input type="email" class="form-control" id="email" name="email" required autocomplete="email">
                                        </div>
                                        <div class="mb-3">
                                            <label for="address" class="form-label">Address <span class="text-danger">*</span></label>
                                            <input type="text" class="form-control" id="address" name="address" required autocomplete="street-address">
                                        </div>
                                        <div class="mb-3">
                                            <label for="note" class="form-label">Note</label>
                                            <textarea class="form-control" id="note" name="note" rows="3"></textarea>
                                        </div>
                                        <button type="submit" class="btn btn-primary w-100">Place Order</button>
                                    </form>
                                </div>
                                <!-- Bảng sản phẩm trong giỏ hàng -->
                                <div class="col-lg-6">
                                    <div class="table-responsive">
                                        <table class="table align-middle mt-2" id="cart-table">
                                            <thead class="table-light">
                                                <tr>
                                                    <th scope="col">Image</th>
                                                    <th scope="col">Product</th>
                                                    <th scope="col">Qty</th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                <!-- Sản phẩm sẽ được render ở đây bằng JS -->
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                            </div>
                            <!-- Thông báo nếu giỏ hàng trống -->
                            <div id="cart-empty-alert" class="alert alert-danger text-center mt-4 d-none" role="alert">
                                Your cart is empty!
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>
<footer id="footer" class="bg-dark text-light pt-4">
    <div class="container">
        <div class="row align-items-start">
            <!-- Left: Logo & Name -->
            <div class="col-md-3 mb-4 mb-md-0 d-flex align-items-center">
                <a class="navbar-brand" href="index.html">VOLTIC TECHNOLOGY PTE. LTD.</a>
            </div>
            <!-- Middle: Information -->
            <div class="col-md-5 mb-4 mb-md-0 info-col ms-auto">
                <h5 class="fw-bold mb-3">Information</h5>
                <ul class="list-unstyled">
                    <li><a href="deleverypolicy.html" class="text-decoration-none text-light-50">Delivery Policy</a></li>
                    <li><a href="legal.html" class="text-decoration-none text-light-50">Legal &amp; Terms of Use</a></li>
                    <li><a href="about.html" class="text-decoration-none text-light-50">About Us</a></li>
                    <li><a href="returnpolicy.html" class="text-decoration-none text-light-50">Return Policy</a></li>
                </ul>
            </div>
            <!-- Right: Contact -->
            <div class="col-md-4">
                <h5 class="fw-bold mb-3">Contact Us</h5>
                <ul class="list-unstyled">
                    <li class="mb-2">
                        <i class="bi bi-geo-alt-fill me-2"></i>
                        3 Coleman Street, #03-24, Peninsula Shopping Complex, Singapore 179804
                    </li>
                    <li>
                        <i class="bi bi-envelope-fill me-2"></i>
                        <a href="mailto:info@volticinnovation.com" class="text-decoration-none text-light-50">info@volticinnovation.com</a>
                    </li>
                </ul>
            </div>
        </div>
        <hr class="bg-secondary my-4">
        <div class="row">
            <div class="col text-center small text-light">
                &copy; VOLTIC TECHNOLOGY PTE. LTD. All rights reserved.
            </div>
        </div>
    </div>
</footer>
    <!-- Bootstrap core JS-->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"></script>
    <!-- Core theme JS-->
    <script src="js/scripts.js"></script>
    <!-- Checkout logic -->
    <script>
    // Lấy giỏ hàng từ localStorage
    function getCart() {
        try {
            const cart = JSON.parse(localStorage.getItem('cart'));
            if (cart && typeof cart === 'object' && !Array.isArray(cart)) {
                return Object.values(cart);
            }
            if (Array.isArray(cart)) return cart;
        } catch (e) {}
        return [];
    }
    // Rút gọn tên sản phẩm
    function limitText(str, maxLength) {
        if (!str) return '';
        return str.length > maxLength ? str.slice(0, maxLength) + '...' : str;
    }
    // Hiển thị sản phẩm trong giỏ hàng
    function renderCheckoutCart() {
        const cart = getCart();
        const tbody = document.querySelector('#cart-table tbody');
        const alert = document.getElementById('cart-empty-alert');
        const submitBtn = document.querySelector('button[type="submit"]');
        if (!tbody) return;
        if (!cart.length) {
            tbody.innerHTML = `<tr><td colspan="3" class="text-center text-danger py-4">Your cart is empty</td></tr>`;
            alert.classList.remove('d-none');
            if(submitBtn) submitBtn.disabled = true;
            return;
        }
        alert.classList.add('d-none');
        if(submitBtn) submitBtn.disabled = false;
        let rows = '';
        cart.forEach(item => {
            rows += `
                <tr>
                    <td><img src="${item.img}" class="cart-img" alt="${limitText(item.name,40)}"></td>
                    <td>${limitText(item.name, 40)}</td>
                    <td>${item.qty}</td>
                </tr>
            `;
        });
        tbody.innerHTML = rows;
    }
    // Xử lý form đặt hàng
    document.addEventListener('DOMContentLoaded', function() {
        renderCheckoutCart();
        const form = document.getElementById('checkout-form');
        if (!form) return;
        form.addEventListener('submit', function(e) {
            e.preventDefault();
            const cart = getCart();
            if (!cart.length) {
                alert('Your cart is empty!');
                return;
            }
            // Lấy dữ liệu form
            const order = {
                name: form.name.value.trim(),
                phone: form.phone.value.trim(),
                email: form.email.value.trim(),
                address: form.address.value.trim(),
                note: form.note.value.trim(),
                cart: cart
            };
            // (Có thể gửi order lên server tại đây)
            localStorage.removeItem('cart');
            window.location.href = "thanks.html";
        });
    });
    </script>
</body>
</html>
